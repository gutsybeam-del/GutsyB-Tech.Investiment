<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Management Portal | Great Achiever International College</title>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
    <script src="https://checkout.flutterwave.com/v3.js"></script>
    
    <style>
        :root { --maroon: #800000; --gold: #daa520; --navy: #000080; --white: #ffffff; --light: #f1f5f9; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--light); margin: 0; color: #1e293b; }
        
        /* Branding */
        header { background: var(--maroon); color: white; padding: 25px; text-align: center; border-bottom: 5px solid var(--gold); }
        .logo-main { font-size: 30px; font-weight: 800; letter-spacing: 1px; }

        /* Navigation */
        nav { background: var(--navy); padding: 12px; display: flex; justify-content: center; gap: 25px; position: sticky; top: 0; z-index: 1000; }
        nav a { color: white; text-decoration: none; font-weight: bold; cursor: pointer; font-size: 14px; text-transform: uppercase; }
        nav a:hover { color: var(--gold); }

        /* Layout */
        .container { max-width: 1100px; margin: 30px auto; padding: 0 20px; }
        .card { background: var(--white); padding: 30px; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.05); margin-bottom: 25px; border-top: 5px solid var(--maroon); }
        .screen { display: none; }
        .active { display: block; animation: fadeIn 0.4s ease-in; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* Form Elements */
        input, select { width: 100%; padding: 14px; margin: 10px 0; border: 1.5px solid #cbd5e1; border-radius: 8px; font-size: 16px; }
        .btn { padding: 15px; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; width: 100%; font-size: 16px; transition: 0.3s; }
        .btn-login { background: var(--navy); color: white; }
        .btn-admin { background: #1e293b; color: white; }
        .btn-pay { background: var(--gold); color: black; }
        
        /* Data Tables */
        table { width: 100%; border-collapse: collapse; margin-top: 20px; background: white; }
        th, td { padding: 15px; text-align: left; border-bottom: 1px solid #e2e8f0; }
        th { background: #f8fafc; color: var(--maroon); }

        /* WhatsApp Floating Button */
        .whatsapp-float { position: fixed; bottom: 30px; right: 30px; background: #25d366; color: white; width: 60px; height: 60px; border-radius: 50%; text-align: center; font-size: 30px; box-shadow: 2px 2px 10px rgba(0,0,0,0.2); z-index: 100; display: flex; align-items: center; justify-content: center; text-decoration: none; }

        /* Admin Badge */
        .badge { padding: 5px 12px; border-radius: 20px; font-size: 12px; font-weight: bold; }
        .paid { background: #dcfce7; color: #166534; }
        .pending { background: #fee2e2; color: #991b1b; }
    </style>
</head>
<body>

<header>
    <div class="logo-main">GREAT ACHIEVER INTERNATIONAL COLLEGE</div>
    <p>...Building Leaders of Tomorrow</p>
</header>

<nav>
    <a onclick="showScreen('login-screen')">Student Portal</a>
    <a onclick="showScreen('admin-login')">Admin Office</a>
</nav>

<div class="container">

    <div id="login-screen" class="screen active card">
        <h2 style="color: var(--maroon);">Student Login</h2>
        <p>Please enter your Matric Number as registered by the school.</p>
        <input type="text" id="std-matric-input" placeholder="Matric Number (GAIC/SSS/001)">
        <button class="btn btn-login" onclick="studentLogin()">Sign In to Portal</button>
    </div>

    <div id="admin-login" class="screen card">
        <h2>Admin Authentication</h2>
        <input type="password" id="admin-pass" placeholder="Enter Admin Security Code">
        <button class="btn btn-admin" onclick="verifyAdmin()">Login as Administrator</button>
    </div>

    <div id="admin-dash" class="screen">
        <div class="card">
            <h3>Register New Student</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                <input type="text" id="reg-name" placeholder="Full Name">
                <input type="text" id="reg-matric" placeholder="Matric Number">
                <select id="reg-class">
                    <option value="JSS">Junior Secondary (â‚¦50,000)</option>
                    <option value="SSS_SCIENCE">Senior Science (â‚¦80,000)</option>
                    <option value="SSS_ART">Senior Art/Comm (â‚¦70,000)</option>
                </select>
                <button class="btn btn-login" onclick="registerStudent()">Add Student to System</button>
            </div>
        </div>

        <div class="card">
            <h3>Registered Students & Payments</h3>
            <table id="admin-student-list">
                <tr><th>Name</th><th>Matric</th><th>Class</th><th>Fees</th></tr>
                </table>
        </div>
    </div>

    <div id="student-dash" class="screen">
        <div class="card" style="background: var(--maroon); color: white;">
            <h2>Student Dashboard</h2>
            <p>Welcome, <span id="portal-name" style="font-weight: bold; color: var(--gold);">...</span></p>
            <p>Matric: <span id="portal-matric">...</span> | Class: <span id="portal-class">...</span></p>
        </div>

        <div class="card">
            <h3>ðŸ’³ Fees Management</h3>
            <p>Total Tuition: <span id="portal-fee-amount" style="font-weight:bold;">â‚¦0.00</span></p>
            <div id="fee-status-box" class="badge pending" style="display:inline-block; margin-bottom:15px;">UNPAID</div>
            <button class="btn btn-pay" id="pay-btn" onclick="triggerPayment()">Pay Fees Now</button>
        </div>

        <div class="card">
            <h3>ðŸ“Š Termly Results</h3>
            <table>
                <tr><th>Subject</th><th>Score</th><th>Grade</th></tr>
                <tr><td>Mathematics</td><td>82</td><td>A1</td></tr>
                <tr><td>English Language</td><td>75</td><td>B2</td></tr>
            </table>
        </div>
    </div>

</div>

<a href="https://wa.me/YOUR_PHONE_NUMBER" class="whatsapp-float" target="_blank">
    <i style="font-style: normal;">ðŸ’¬</i>
</a>

<script>
    // --- DATABASE CONFIG ---
    // (Reminder: Connect your real Firebase project here)
    let localDB = []; // This simulates a database for now. In Firebase, use db.collection('students')

    let activeStudent = null;

    function showScreen(id) {
        document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
        document.getElementById(id).classList.add('active');
    }

    // --- ADMIN LOGIC ---
    function verifyAdmin() {
        const pass = document.getElementById('admin-pass').value;
        if(pass === "1234") { // Use a secure password
            showScreen('admin-dash');
        } else {
            alert("Wrong Admin Code!");
        }
    }

    function registerStudent() {
        const name = document.getElementById('reg-name').value;
        const matric = document.getElementById('reg-matric').value;
        const level = document.getElementById('reg-class').value;
        
        let fee = 0;
        if(level === "JSS") fee = 50000;
        else if(level === "SSS_SCIENCE") fee = 80000;
        else fee = 70000;

        const newStudent = { name, matric, level, fee, paid: false };
        localDB.push(newStudent);
        
        updateAdminList();
        alert("Student " + name + " Registered Successfully!");
    }

    function updateAdminList() {
        const table = document.getElementById('admin-student-list');
        table.innerHTML = `<tr><th>Name</th><th>Matric</th><th>Class</th><th>Fees</th></tr>`;
        localDB.forEach(s => {
            table.innerHTML += `<tr><td>${s.name}</td><td>${s.matric}</td><td>${s.level}</td><td>${s.paid ? '<span class="badge paid">PAID</span>' : '<span class="badge pending">UNPAID</span>'}</td></tr>`;
        });
    }

    // --- STUDENT LOGIC ---
    function studentLogin() {
        const matric = document.getElementById('std-matric-input').value;
        // Search "Database"
        const student = localDB.find(s => s.matric === matric);

        if(student) {
            activeStudent = student;
            document.getElementById('portal-name').innerText = student.name;
            document.getElementById('portal-matric').innerText = student.matric;
            document.getElementById('portal-class').innerText = student.level.replace("_", " ");
            document.getElementById('portal-fee-amount').innerText = "â‚¦" + student.fee.toLocaleString();
            
            showScreen('student-dash');
        } else {
            alert("Matric Number not found. Please contact the Admin to register you.");
        }
    }

    function triggerPayment() {
        FlutterwaveCheckout({
            public_key: "FLWPUBK_TEST-YOUR-KEY-HERE",
            tx_ref: "GAIC-" + activeStudent.matric + "-" + Date.now(),
            amount: activeStudent.fee,
            currency: "NGN",
            customer: {
                email: "student@greatachiever.com",
                name: activeStudent.name,
            },
            callback: function (data) {
                if (data.status === "successful") {
                    activeStudent.paid = true;
                    document.getElementById('fee-status-box').innerText = "PAID";
                    document.getElementById('fee-status-box').className = "badge paid";
                    document.getElementById('pay-btn').style.display = "none";
                    updateAdminList();
                }
            },
        });
    }
</script>

</body>
</html>
