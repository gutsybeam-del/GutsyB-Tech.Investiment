<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Great Achiever International College | Pro Portal</title>
    <script src="https://remitademo.net/payment/v1/remita-pay-inline.bundle.js"></script>
    <style>
        :root { --primary: #800000; --navy: #001f3f; --gold: #daa520; --light: #f4f7f6; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--light); margin: 0; display: flex; flex-direction: column; height: 100vh; overflow: hidden; }
        header { background: var(--primary); color: white; padding: 15px 25px; display: flex; justify-content: space-between; align-items: center; border-bottom: 4px solid var(--gold); }
        .main-container { display: flex; flex: 1; overflow: hidden; }
        .sidebar { width: 260px; background: var(--navy); color: white; display: none; flex-direction: column; padding-top: 20px; }
        .sidebar a { padding: 15px 25px; color: #cbd5e1; text-decoration: none; display: block; cursor: pointer; border-bottom: 1px solid rgba(255,255,255,0.05); }
        .content { flex: 1; padding: 25px; overflow-y: auto; }
        .card { background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); margin-bottom: 25px; }
        .screen { display: none; }
        .active-screen { display: block; animation: fadeIn 0.3s ease; }
        
        /* Spin Game UI */
        .wheel-container { text-align: center; padding: 20px; background: #fffde7; border: 2px solid var(--gold); border-radius: 15px; }
        .wheel { width: 200px; height: 200px; border-radius: 50%; border: 10px solid var(--navy); margin: 20px auto; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 20px; transition: transform 3s cubic-bezier(0.17, 0.67, 0.83, 0.67); background: conic-gradient(red 0% 25%, gold 25% 50%, green 50% 75%, blue 75% 100%); }
        
        input, select { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ddd; border-radius: 8px; }
        .btn { padding: 14px; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; width: 100%; margin-top: 10px; }
        .btn-main { background: var(--primary); color: white; }
        .btn-spin { background: #4caf50; color: white; font-size: 18px; }
        
        table { width: 100%; border-collapse: collapse; }
        th, td { border: 1px solid #eee; padding: 10px; text-align: left; }
        @media print { .sidebar, header, .btn, .no-print { display: none !important; } .content { padding: 0; } .card { box-shadow: none; border: 1px solid #000; } }
    </style>
</head>
<body>

<header>
    <div>GREAT ACHIEVER INTERNATIONAL COLLEGE</div>
    <div id="user-balance" style="font-size: 14px; color: var(--gold);">Wallet: ‚Ç¶0.00</div>
</header>

<div class="main-container">
    <div class="sidebar" id="sidebar">
        <a onclick="showScreen('s-home')">üè† Dashboard</a>
        <a onclick="showScreen('s-reg')">üìù Course Registration</a>
        <a onclick="showScreen('s-results')">üìä Print Results</a>
        <a onclick="showScreen('s-spin')">üé° Spin & Win</a>
        <a onclick="showScreen('s-fees')">üí≥ School Fees</a>
        <a onclick="location.reload()" style="color:red;">üö™ Logout</a>
    </div>

    <div class="content">
        <div id="login-screen" class="screen active-screen card" style="max-width: 400px; margin: auto;">
            <h2 style="text-align:center;">Student Access</h2>
            <input type="text" id="l-id" placeholder="Admission ID">
            <input type="password" id="l-pass" placeholder="Password">
            <button class="btn btn-main" onclick="doLogin()">Login</button>
            <p onclick="adminGate()" style="text-align:center; cursor:pointer; color:gray; font-size:11px;">Admin Entry</p>
        </div>

        <div id="admin-screen" class="screen card">
            <button onclick="showScreen('login-screen')">‚¨Ö Back</button>
            <h2>Admin Office</h2>
            <input type="text" id="r-name" placeholder="Student Full Name">
            <input type="text" id="r-id" placeholder="ID Number">
            <select id="r-dept">
                <option value="Science">Science</option>
                <option value="Art">Art</option>
                <option value="Commerce">Commerce</option>
            </select>
            <button class="btn btn-main" onclick="enroll()">Enroll Student</button>
        </div>

        <div id="s-spin" class="screen card">
            <div class="wheel-container">
                <h3>üé° Spin & Win Real Money</h3>
                <p>Spins Left Today: <strong id="spins-count">0</strong></p>
                <div class="wheel" id="wheel">SPIN</div>
                <button class="btn btn-spin" id="spin-btn" onclick="playSpin()">SPIN NOW</button>
                <hr>
                <p style="font-size: 12px;">Finish your free spins? Get <b>30 Extra Spins</b> for ‚Ç¶500</p>
                <button class="btn btn-main" style="background:#ff5722;" onclick="buySpins()">Buy 30 Spins (Remita)</button>
            </div>
        </div>

        <div id="s-results" class="screen card">
            <div style="display:flex; justify-content:space-between; align-items:center;">
                <h2>Official Term Report</h2>
                <button class="btn no-print" style="width:auto; padding:5px 15px;" onclick="window.print()">üñ® Print Result</button>
            </div>
            <div id="res-box">Register courses to see result sheet.</div>
        </div>

        <div id="s-reg" class="screen card">
            <h2>Course Registration</h2>
            <div id="sub-list" style="display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-bottom:20px;"></div>
            <button class="btn btn-main" onclick="saveCourses()">Confirm Registration</button>
        </div>

        <div id="s-home" class="screen card" style="text-align:center;">
            <h2 id="h-name">...</h2>
            <p id="h-dept">...</p>
            <div style="background:#e3f2fd; padding:15px; border-radius:10px;">
                <p>Today's News: Welcome to Great Achiever! You have free spins waiting.</p>
            </div>
        </div>
    </div>
</div>

<script>
    let db = JSON.parse(localStorage.getItem('GAIC_PRO_V3')) || [];
    let user = null;

    const subjects = {
        "Science": ["Physics", "Chemistry", "Biology", "Further Maths", "Maths", "English"],
        "Art": ["Government", "Literature", "History", "CRS/IRS", "Maths", "English"],
        "Commerce": ["Accounts", "Commerce", "Economics", "Marketing", "Maths", "English"]
    };

    function showScreen(id) {
        document.querySelectorAll('.screen').forEach(s => s.classList.remove('active-screen'));
        document.getElementById(id).classList.add('active-screen');
        if(id === 's-reg') renderSubs();
        if(id === 's-results') renderResults();
        if(id === 's-spin') updateSpinUI();
    }

    function doLogin() {
        const id = document.getElementById('l-id').value;
        const pass = document.getElementById('l-pass').value;
        user = db.find(x => x.id === id && x.pass === pass);
        if(user) {
            if(!user.wallet) user.wallet = 0;
            if(!user.spins) user.spins = 5;
            document.getElementById('sidebar').style.display = 'flex';
            document.getElementById('h-name').innerText = user.name;
            document.getElementById('h-dept').innerText = user.dept + " Dept";
            updateSpinUI();
            showScreen('s-home');
        } else alert("Invalid ID");
    }

    function renderSubs() {
        const box = document.getElementById('sub-list');
        box.innerHTML = "";
        subjects[user.dept].forEach(s => {
            const checked = user.regSubs && user.regSubs.includes(s) ? "checked" : "";
            box.innerHTML += `<div><input type="checkbox" value="${s}" ${checked} class="sub-item"> ${s}</div>`;
        });
    }

    function saveCourses() {
        let selected = [];
        document.querySelectorAll('.sub-item:checked').forEach(i => selected.push(i.value));
        user.regSubs = selected;
        localStorage.setItem('GAIC_PRO_V3', JSON.stringify(db));
        alert("Registration Updated!");
    }

    function renderResults() {
        const box = document.getElementById('res-box');
        if(!user.regSubs || user.regSubs.length === 0) return;
        let html = `<h3>${user.name} (${user.id})</h3><table><tr><th>Subject</th><th>CA</th><th>Exam</th><th>Total</th></tr>`;
        user.regSubs.forEach(s => html += `<tr><td>${s}</td><td>30</td><td>55</td><td>85</td></tr>`);
        box.innerHTML = html + "</table>";
    }

    // --- SPIN LOGIC ---
    function updateSpinUI() {
        document.getElementById('spins-count').innerText = user.spins;
        document.getElementById('user-balance').innerText = "Wallet: ‚Ç¶" + user.wallet.toLocaleString();
    }

    function playSpin() {
        if(user.spins <= 0) return alert("No spins left! Buy more with ‚Ç¶500.");
        const wheel = document.getElementById('wheel');
        const btn = document.getElementById('spin-btn');
        btn.disabled = true;
        
        const deg = Math.floor(Math.random() * 360) + 1440; // Spin at least 4 times
        wheel.style.transform = `rotate(${deg}deg)`;
        
        setTimeout(() => {
            const winAmts = [10, 50, 0, 100, 5, 20];
            const win = winAmts[Math.floor(Math.random() * winAmts.length)];
            user.wallet += win;
            user.spins -= 1;
            localStorage.setItem('GAIC_PRO_V3', JSON.stringify(db));
            updateSpinUI();
            alert(win > 0 ? `üéä You won ‚Ç¶${win}!` : "üò¢ No win this time. Try again!");
            btn.disabled = false;
        }, 3100);
    }

    function buySpins() {
        RmPaymentEngine.init({
            key: "REVXU0VSfDQwMjc1fGYzY2M0Y2VlYTNkM2IyZTM5YTZlMGRhNmU3YmU5YWVl", // Demo Key
            transactionId: "SPIN-" + Date.now(),
            amount: 500,
            firstName: user.name,
            email: user.id + "@school.com",
            onSuccess: (response) => {
                user.spins += 30;
                localStorage.setItem('GAIC_PRO_V3', JSON.stringify(db));
                updateSpinUI();
                alert("30 Spins Added!");
            }
        });
    }

    function enroll() {
        const name = document.getElementById('r-name').value;
        const id = document.getElementById('r-id').value;
        const dept = document.getElementById('r-dept').value;
        db.push({ name, id, dept, pass: "1234", wallet: 0, spins: 5, regSubs: [] });
        localStorage.setItem('GAIC_PRO_V3', JSON.stringify(db));
        alert("Enrolled!");
    }

    function adminGate() { if(prompt("Key:") === "777") showScreen('admin-screen'); }
</script>
</body>
</html>
