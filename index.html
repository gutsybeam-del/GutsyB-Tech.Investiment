<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Great Achiever International College | Elite Student Portal</title>
    <script src="https://remitademo.net/payment/v1/remita-pay-inline.bundle.js"></script>
    <style>
        :root { --primary: #800000; --navy: #001f3f; --gold: #daa520; --light: #f1f5f9; --white: #ffffff; }
        
        body { font-family: 'Inter', sans-serif; background: var(--light); margin: 0; display: flex; flex-direction: column; height: 100vh; overflow: hidden; }
        
        /* Navigation & Header */
        header { background: var(--primary); color: white; padding: 18px 30px; display: flex; justify-content: space-between; align-items: center; border-bottom: 4px solid var(--gold); box-shadow: 0 4px 10px rgba(0,0,0,0.1); z-index: 100; }
        .main-container { display: flex; flex: 1; overflow: hidden; }
        
        .sidebar { width: 280px; background: var(--navy); color: white; display: none; flex-direction: column; padding-top: 20px; transition: all 0.3s; }
        .sidebar a { padding: 16px 25px; color: #cbd5e1; text-decoration: none; display: flex; align-items: center; gap: 12px; cursor: pointer; border-bottom: 1px solid rgba(255,255,255,0.05); font-size: 14px; }
        .sidebar a:hover { background: rgba(255,255,255,0.1); color: var(--gold); }

        /* Main Content */
        .content { flex: 1; padding: 30px; overflow-y: auto; scroll-behavior: smooth; }
        .card { background: var(--white); padding: 30px; border-radius: 16px; box-shadow: 0 10px 25px rgba(0,0,0,0.05); margin-bottom: 25px; border: 1px solid #e2e8f0; }
        .screen { display: none; max-width: 900px; margin: 0 auto; }
        .active-screen { display: block; animation: slideUp 0.4s ease-out; }

        /* Profile & Settings */
        .profile-pic { width: 120px; height: 120px; border-radius: 50%; border: 4px solid var(--gold); object-fit: cover; background: #eee; margin: 0 auto 15px; display: block; }
        input, select { width: 100%; padding: 14px; margin: 10px 0; border: 1px solid #cbd5e1; border-radius: 10px; font-size: 15px; }
        
        /* Buttons */
        .btn { padding: 14px; border: none; border-radius: 10px; cursor: pointer; font-weight: 700; width: 100%; transition: 0.3s; font-size: 15px; }
        .btn-primary { background: var(--primary); color: white; }
        .btn-gold { background: var(--gold); color: var(--navy); }
        .btn-success { background: #10b981; color: white; }

        /* Spinning Game */
        .spin-box { text-align: center; background: radial-gradient(circle, #fff 0%, #fef3c7 100%); padding: 30px; border-radius: 20px; border: 2px dashed var(--gold); }
        .wheel { width: 220px; height: 220px; border-radius: 50%; border: 8px solid var(--navy); margin: 20px auto; display: flex; align-items: center; justify-content: center; position: relative; overflow: hidden; transition: transform 4s cubic-bezier(0.15, 0, 0.15, 1); background: conic-gradient(#800000 0% 12%, #daa520 12% 25%, #001f3f 25% 37%, #10b981 37% 50%, #800000 50% 62%, #daa520 62% 75%, #001f3f 75% 87%, #10b981 87% 100%); }
        .wheel-pointer { width: 0; height: 0; border-left: 15px solid transparent; border-right: 15px solid transparent; border-top: 20px solid black; position: absolute; top: -5px; z-index: 5; left: 50%; transform: translateX(-50%); }

        @keyframes slideUp { from { opacity:0; transform: translateY(20px); } to { opacity:1; transform: translateY(0); } }
        @media print { .no-print { display: none !important; } .card { border: none; box-shadow: none; } }
    </style>
</head>
<body>

<header>
    <div style="font-weight: 800; font-size: 20px;">GREAT ACHIEVER INTERNATIONAL</div>
    <div id="wallet-balance" style="background: rgba(255,255,255,0.2); padding: 8px 15px; border-radius: 30px; font-weight: bold; border: 1px solid var(--gold);">Wallet: ‚Ç¶0.00</div>
</header>

<div class="main-container">
    <div class="sidebar" id="sidebar">
        <a onclick="showScreen('s-home')">üè† My Dashboard</a>
        <a onclick="showScreen('s-reg')">üìù Course Registration</a>
        <a onclick="showScreen('s-results')">üìú View & Print Results</a>
        <a onclick="showScreen('s-spin')">üé° Spin & Earn Money</a>
        <a onclick="showScreen('s-withdraw')">üí∞ Withdraw Funds</a>
        <a onclick="showScreen('s-settings')">‚öôÔ∏è Profile Settings</a>
        <a onclick="location.reload()" style="color: #fda4af;">üö™ Logout</a>
    </div>

    <div class="content">
        <div id="login-screen" class="screen active-screen card" style="max-width: 400px;">
            <h2 style="text-align:center; color: var(--primary);">Secure Portal Access</h2>
            <input type="text" id="l-id" placeholder="Admission ID">
            <input type="password" id="l-pass" placeholder="Password">
            <button class="btn btn-primary" onclick="doLogin()">Sign In</button>
            <p onclick="adminGate()" style="text-align:center; cursor:pointer; color:gray; font-size:12px; margin-top:20px;">Staff Only Access</p>
        </div>

        <div id="admin-screen" class="screen card">
            <h2>School Registrar Office</h2>
            <input type="text" id="r-name" placeholder="Full Student Name">
            <input type="text" id="r-id" placeholder="Admission ID">
            <select id="r-dept">
                <option value="Science">Senior Science</option>
                <option value="Art">Senior Art</option>
                <option value="Commerce">Senior Commerce</option>
                <option value="JSS">Junior Secondary</option>
            </select>
            <button class="btn btn-primary" onclick="enroll()">Enroll New Student</button>
        </div>

        <div id="s-spin" class="screen card">
            <div class="spin-box">
                <h2 style="margin:0;">üé° Daily Spin & Win</h2>
                <p>Spin Cost: <b>‚Ç¶500</b> | Free Spins Left: <b id="spin-free">0</b></p>
                <div style="position:relative; width:fit-content; margin:auto;">
                    <div class="wheel-pointer"></div>
                    <div class="wheel" id="wheel"></div>
                </div>
                <button class="btn btn-success" id="btn-spin" onclick="startSpin()">SPIN WHEEL (‚Ç¶500)</button>
                <button class="btn btn-gold" style="margin-top:10px;" onclick="buySpins()">Buy 30 Spins (‚Ç¶500 via Remita)</button>
            </div>
        </div>

        <div id="s-withdraw" class="screen card">
            <h2>üí∞ Withdraw Your Earnings</h2>
            <p>Minimum Withdrawal: <b>‚Ç¶2,000</b></p>
            <input type="number" id="w-amt" placeholder="Amount to Withdraw">
            <input type="text" id="w-bank" placeholder="Bank Name">
            <input type="text" id="w-acct" placeholder="Account Number">
            <button class="btn btn-primary" onclick="handleWithdraw()">Process Withdrawal</button>
        </div>

        <div id="s-settings" class="screen card">
            <h2>‚öôÔ∏è Account Settings</h2>
            <div style="text-align:center;">
                <img src="" id="set-img" class="profile-pic">
                <input type="file" id="file-in" accept="image/*" onchange="previewImg()">
                <button class="btn btn-primary" style="width:auto;" onclick="savePhoto()">Upload Passport</button>
            </div>
            <hr style="margin:30px 0;">
            <h3>Security Update</h3>
            <input type="password" id="set-p1" placeholder="Enter New Password">
            <input type="password" id="set-p2" placeholder="Confirm New Password">
            <button class="btn btn-gold" onclick="savePass()">Change Password</button>
        </div>

        <div id="s-results" class="screen card">
            <div style="display:flex; justify-content:space-between; align-items:center;" class="no-print">
                <h2>Transcript Record</h2>
                <button class="btn btn-primary" style="width:auto;" onclick="window.print()">Print PDF</button>
            </div>
            <div id="res-sheet">Register courses to see transcript.</div>
        </div>

        <div id="s-reg" class="screen card">
            <h2>üìù Semester Course Form</h2>
            <div id="sub-box" style="display:grid; grid-template-columns:1fr 1fr; gap:10px;"></div>
            <button class="btn btn-primary" onclick="saveCourses()" style="margin-top:20px;">Submit Registration</button>
        </div>

        <div id="s-home" class="screen card" style="text-align:center;">
            <img src="" id="h-img" class="profile-pic">
            <h1 id="h-name" style="color:var(--primary); margin:0;">...</h1>
            <p id="h-dept" style="font-weight:bold; color:var(--gold);">...</p>
            <div style="background:var(--navy); color:white; padding:20px; border-radius:15px; margin-top:20px;">
                <p>Welcome to the 2025 Academic Session. Keep your portal details safe.</p>
            </div>
        </div>
    </div>
</div>

<script>
    let db = JSON.parse(localStorage.getItem('GAIC_ELITE_V4')) || [];
    let user = null;
    let tempImg = "";

    const subjects = {
        "Science": ["Physics", "Chemistry", "Biology", "Further Maths", "General Maths", "English"],
        "Art": ["Government", "Literature", "History", "CRS/IRS", "General Maths", "English"],
        "Commerce": ["Financial Accounting", "Commerce", "Economics", "Marketing", "Maths", "English"],
        "JSS": ["Basic Tech", "Basic Science", "Social Studies", "Home Economics", "Maths", "English"]
    };

    function showScreen(id) {
        document.querySelectorAll('.screen').forEach(s => s.classList.remove('active-screen'));
        document.getElementById(id).classList.add('active-screen');
        if(id === 's-reg') loadSubs();
        if(id === 's-results') loadResults();
        if(id === 's-settings') loadSettings();
        updateUI();
    }

    function doLogin() {
        const id = document.getElementById('l-id').value;
        const pass = document.getElementById('l-pass').value;
        user = db.find(x => x.id === id && x.pass === pass);
        if(user) {
            if(!user.wallet) user.wallet = 0;
            if(user.spins === undefined) user.spins = 5;
            document.getElementById('sidebar').style.display = 'flex';
            showScreen('s-home');
        } else alert("Access Denied");
    }

    function updateUI() {
        if(!user) return;
        document.getElementById('wallet-balance').innerText = "Wallet: ‚Ç¶" + user.wallet.toLocaleString();
        document.getElementById('h-name').innerText = user.name;
        document.getElementById('h-dept').innerText = user.dept.toUpperCase();
        document.getElementById('h-img').src = user.img || "https://via.placeholder.com/120";
        document.getElementById('spin-free').innerText = user.spins;
    }

    // --- SPINNING GAME ---
    function startSpin() {
        if(user.spins <= 0 && user.wallet < 10) return alert("You need ‚Ç¶10 to spin or buy more spins!");
        
        const btn = document.getElementById('btn-spin');
        const wheel = document.getElementById('wheel');
        btn.disabled = true;

        if(user.spins > 0) user.spins--; else user.wallet -= 10;

        const rotation = Math.floor(Math.random() * 360) + 1800;
        wheel.style.transform = `rotate(${rotation}deg)`;

        setTimeout(() => {
            const prizes = [0, 500, 1000, 2000, 500, 1000, 200, 0];
            const prize = prizes[Math.floor(Math.random() * prizes.length)];
            user.wallet += prize;
            saveData();
            updateUI();
            alert(prize > 0 ? `üéâ You won ‚Ç¶${prize}!` : "üò¢ Try again!");
            btn.disabled = false;
        }, 4100);
    }

    function buySpins() {
        RmPaymentEngine.init({
            key: "REVXU0VSfDQwMjc1fGYzY2M0Y2VlYTNkM2IyZTM5YTZlMGRhNmU3YmU5YWVl", 
            transactionId: "SPIN-" + Date.now(),
            amount: 500,
            firstName: user.name,
            email: user.id + "@school.com",
            onSuccess: () => { user.spins += 30; saveData(); updateUI(); alert("30 Spins Added!"); }
        });
    }

    // --- WITHDRAWAL ---
    function handleWithdraw() {
        const amt = document.getElementById('w-amt').value;
        if(user.wallet < 2000) return alert("Minimum withdrawal is ‚Ç¶2,000. Keep spinning!");
        if(amt > user.wallet) return alert("Insufficient funds!");
        user.wallet -= amt;
        saveData();
        updateUI();
        alert("Withdrawal request for ‚Ç¶" + amt + " submitted to School Admin!");
    }

    // --- SETTINGS ---
    function loadSettings() {
        document.getElementById('set-img').src = user.img || "https://via.placeholder.com/120";
    }

    function previewImg() {
        const file = document.getElementById('file-in').files[0];
        const reader = new FileReader();
        reader.onloadend = () => { tempImg = reader.result; document.getElementById('set-img').src = tempImg; };
        if(file) reader.readAsDataURL(file);
    }

    function savePhoto() {
        if(!tempImg) return alert("Select a photo!");
        user.img = tempImg;
        saveData();
        alert("Passport Updated!");
    }

    function savePass() {
        const p1 = document.getElementById('set-p1').value;
        const p2 = document.getElementById('set-p2').value;
        if(p1 !== p2) return alert("Passwords do not match!");
        user.pass = p1;
        saveData();
        alert("Password Updated!");
    }

    // --- COURSES & RESULTS ---
    function loadSubs() {
        const box = document.getElementById('sub-box');
        box.innerHTML = "";
        subjects[user.dept].forEach(s => {
            const chk = user.reg && user.reg.includes(s) ? "checked" : "";
            box.innerHTML += `<div><input type="checkbox" value="${s}" ${chk} class="sub-ch"> ${s}</div>`;
        });
    }

    function saveCourses() {
        let sel = [];
        document.querySelectorAll('.sub-ch:checked').forEach(i => sel.push(i.value));
        user.reg = sel;
        saveData();
        alert("Registration Successful!");
    }

    function loadResults() {
        const box = document.getElementById('res-sheet');
        if(!user.reg) return;
        let html = `<h3>${user.name} Transcript</h3><table><tr><th>Subject</th><th>Score</th><th>Grade</th></tr>`;
        user.reg.forEach(s => html += `<tr><td>${s}</td><td>82</td><td>A1</td></tr>`);
        box.innerHTML = html + "</table>";
    }

    function enroll() {
        const name = document.getElementById('r-name').value;
        const id = document.getElementById('r-id').value;
        const dept = document.getElementById('r-dept').value;
        db.push({ name, id, dept, pass: "1234", wallet: 0, spins: 5, img: "", reg: [] });
        saveData();
        alert("Student Enrolled!");
    }

    function saveData() { localStorage.setItem('GAIC_ELITE_V4', JSON.stringify(db)); }
    function adminGate() { if(prompt("Admin Key:") === "777") showScreen('admin-screen'); }
</script>
</body>
</html>

